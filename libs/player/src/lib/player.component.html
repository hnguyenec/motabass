<mtb-playlist class="playlist" [songs]="songs"></mtb-playlist>

<mtb-metadata [song]="currentSong" class="main">
  <canvas
    [mtbVisual]="analyser"
    class="vis"
    style="position: absolute; bottom: 0; width: 100%; height: 60%;"
    mainColor="red"
    peakColor="yellow"
    meterNum="60"
  ></canvas>
</mtb-metadata>

<div fxLayout="row" fxLayoutAlign="start center" class="bar">
  <button class="no-mobile" mat-icon-button color="accent" style="color: white;" (click)="next()">
    <mat-icon>skip_next</mat-icon>
  </button>
  <button class="no-mobile" mat-icon-button color="accent" style="color: white;" (click)="previous()">
    <mat-icon>skip_previous</mat-icon>
  </button>
  <button mat-icon-button color="accent" style="color: white;" (click)="stop()">
    <mat-icon>stop</mat-icon>
  </button>
  <button mat-icon-button [color]="playing ? 'accent' : 'white'" (click)="playPause()">
    <mat-icon *ngIf="playing">pause</mat-icon>
    <mat-icon *ngIf="!playing">play_arrow</mat-icon>
  </button>
  <button mat-icon-button style="color: white;" (click)="loadFolder()">
    <mat-icon>folder_open</mat-icon>
  </button>
  <div fxFlex *ngIf="!currentSong"></div>

  <mat-slider
    fxFlex
    *ngIf="currentSong"
    [max]="durationSeconds"
    min="0"
    tickInterval="60"
    thumbLabel
    color="accent"
    [displayWith]="formatLabel"
    [value]="position"
    (change)="setSeekPosition($event)"
  ></mat-slider>

  <div class="no-mobile" style="font-size: small; color: white; padding: 0 12px;">
    <p>{{ position | time }} / {{ durationSeconds | time }}</p>
  </div>

  <button mat-icon-button [color]="shuffle ? 'accent' : 'white'" (click)="toggleShuffle()">
    <mat-icon>shuffle</mat-icon>
  </button>
  <button mat-icon-button [color]="repeat ? 'accent' : 'white'" (click)="toggleRepeat()">
    <mat-icon>loop</mat-icon>
  </button>
</div>
